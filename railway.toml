[build]
  builder = "NIXPACKS"

[deploy]
  startCommand = "cd backend && uvicorn server:app --host 0.0.0.0 --port $PORT"
  healthcheckPath = "/api/"
  healthcheckTimeout = 100
  restartPolicyType = "ON_FAILURE"
  restartPolicyMaxRetries = 10

[environments.production.variables]
  CORS_ORIGINS = "$RAILWAY_STATIC_URL,https://*.railway.app"